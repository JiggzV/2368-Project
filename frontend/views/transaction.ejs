<!DOCTYPE html>
<html>
<head>
    <title> New Transaction</title>
    <script>
        function toggleDropdowns() {
            const assetType = document.getElementById("assetType").value;
            if (assetType === "stock") {
                document.getElementById("stockDropdown").style.display = "block";
                document.getElementById("bondDropdown").style.display = "none";
            } else {
                document.getElementById("stockDropdown").style.display = "none";
                document.getElementById("bondDropdown").style.display = "block";

            }
        }
    </script>
</head>

<body>
    <h1> New Transaction for Investor ID <%= investorId %></h1>
    <form action="/transactions" method="POST">
        <input type="hidden" name="investorID" value="<% investorId %>">

        <label for ="assetType">Select Asset Type:</label>
        <select id="assetType" name="assetType" onchange="toggleDropdowns()">
            <option value="stock">Stock</option>
            <option value="bond">Bond</option>
        </select>


        <div id="stockDropdown" class="assetDropdown">
            <label for="stock">Select Stock:</label>
            <select id="stock" name="stockId">
                <% stocks.forEach(function(stock) { %>
                    <option value="<%= stock.id %>"><%= stock.stockname %></option>
                <% }); %>
            </select>
        </div>


        <div id="bondDropdown" class="assetDropdown" style="display:none;">
            <label for="bond">Select Stock:</label>
            <select id="bond" name="bondId">
                <% bonds.forEach(function(bond) { %>
                    <option value="<%= bond.id %>"><%= bond.bondname %></option>
                <% }); %>
            </select>
        </div>

        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" name="quantity" required>

        <label for="transactionType">Transaction Type:</label>
        <select id="transactionType" name="transactionType">
            <option value="buy">Buy</option>
            <option valye="sell">Sell</option>
        </select>

        <input type="submit" value="Submit Transaction">
    </form>

    <a href="/">Go Back Home</a>
</body>
</html>